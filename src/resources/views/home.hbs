<!DOCTYPE html>
<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Uploading</title>
</head>
  
<body>
<div class="mt-3">
    <div class="row"> 
        <div class="col-3">
            <div class="news">activity</div>
        </div>
        <div class="col-sm-6 col-lg-6 mb-2">
        <div class="form-floating mt-3 mb-3">
            <input type="text" class="form-control" id="name" data-bs-toggle="modal" data-bs-target="#exampleModal"> 
            <label for="name">Bạn muốn viết gì!!</label>
        </div> 
        <!-- Modal Post -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5 text-center flex-fill" id="exampleModalLabel">Create post</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="POST" action="/post/store" enctype="multipart/form-data">    
                        <div class="form-floating mt-3">
                            <textarea class="form-control" placeholder="Leave a comment here" id="description" autofocus="true" name="description" style="height: 100px"></textarea>
                            <label for="description">Bạn muốn viết gì!!</label>
                        </div>   
                        <div>
                            <label for="image">Upload Image</label>
                            <input type="file" id="image" name="image" value="" required>
                        </div>
                        <button type="submit" id="modal-submit-btn" class="mt-4 btn btn-primary w-100 ">Thêm bài viết</button>  
                    </form>  
                </div> 
                </div>
            </div>
        </div> 
        {{#each posts}}
            <div class="card mb-3">
                <div class="card-header">
                    <div class="card-header-user row align-items-center"> 
                        <a href="#" class="header-user-link col-3">
                            <img class="header-user-image" src="https://changevn.org/wp-content/uploads/2021/03/logo.png" alt="#">
                        </a>
                        <div class="header-user-information col-9 d-flex flex-column p-0">
                            <div>
                                <a class="d-inline header-user-name text-dark"  href="">
                                    <span class="m-0"><b>{{this.name}}</b></span>
                                </a> 
                            </div>
                            <div>
                                <a class="d-inline  header-user-time text- " href="">
                                    <span class="m-0 "></span> 
                                </a> 
                            </div>
                        </div> 
                    </div>
                </div>
                <div class="card-body">
                    <div class="body-title mb-2">
                        <div class="header-title-text">
                            <b>Nhân Nhựa</b>
                        </div>
                    </div>
                    <div class="card-body-content">
                        <div class="body-post">
                            <div class="body-post-text">
                                {{ this.description }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="body-post-main-wrapp-img">
                    <img class="body-post-main-img" src="data:{{this.image.contentType}};base64,{{toString this.image.data}}">
                </div>
                <div class="card-footer row align-items-center m-0">
                    <div class="footer-react col-1">
                        <a href="" class="footer-react-icon prevent-behavior">
                            <i class="fa-regular fa-heart"></i>
                        </a>
                    </div>
                    <div class="footer-share col-1">
                        <a href="" class="footer-share-icon prevent-behavior">
                            <i class="fa-regular fa-share-from-square"></i>
                        </a>
                    </div>
                    <form method="POST" action="/" class="footer-comment d-flex p-0 col">
                        <div class="flex-fill d-flex align-items-center">
                            <label style="cursor: pointer; padding-left:12px" class="h-100 d-flex align-items-center" for="comment-inp"><i class="fa-solid fa-magnifying-glass "></i></label>
                            <input  type="text" name="comment-input" id="comment-inp" class="footer-comment-input">
                        </div>
                        <button type="submit" class="btn"><i class="fa-solid fa-paper-plane pe-1"></i></button>
                    </form>
                </div>
            </div>
        {{/each}}
        </div>
        <div class="col-3">
            <div class="community">
                community
            </div>
        </div>

    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded',() => {   
        const textPost = $('#description')
        const submitBtn = $('#modal-submit-btn')
        if (textPost.val() == false) {
            submitBtn.addClass('disabled')
        }
        textPost.bind('input propertychange',function() { 
            if ($(this).val() == false) {
                submitBtn.addClass('disabled')
            } else {
                submitBtn.removeClass('disabled') 
            }

        })
    })
</script> 

</body>
  
</html>